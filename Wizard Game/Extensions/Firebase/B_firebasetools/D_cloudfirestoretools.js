var gdjs;(function(p){let j;(function(m){let x;(function(u){let c;(function(o){const r=new Map,E=e=>({data:e.data(),exists:e.exists,id:e.id}),h=e=>({size:e.size,empty:e.empty,docs:e.docs.map(E)});o.startQuery=(e,s)=>{r.set(e,firebase.firestore().collection(s))},o.startQueryFrom=(e,s)=>{r.has(s)&&r.set(e,r.get(s))},o.queryWhere=(e,s,t,n)=>{r.has(e)&&r.set(e,r.get(e).where(s,t,n))},o.queryOrderBy=(e,s,t)=>{r.has(e)&&r.set(e,r.get(e).orderBy(s,t))},o.queryLimit=(e,s,t)=>{r.has(e)&&r.set(e,r.get(e)[t?"limitToLast":"limit"](s))},o.querySkipSome=(e,s,t,n)=>{r.has(e)&&r.set(e,r.get(e)[t?n?"endAt":"endBefore":n?"startAt":"startAfter"](s))},o.executeQuery=(e,s,t)=>{!r.has(e)||r.get(e).get().then(n=>{typeof t!="undefined"&&t.setString("ok"),typeof s!="undefined"&&s.fromJSObject(h(n))}).catch(n=>{typeof t!="undefined"&&t.setString(n.message)})},o.watchQuery=(e,s,t)=>{!r.has(e)||r.get(e).onSnapshot(n=>{typeof t!="undefined"&&t.setString("ok"),typeof s!="undefined"&&s.fromJSObject(h(n))},n=>{typeof t!="undefined"&&t.setString(n.message)})},o.addDocument=(e,s,t)=>{firebase.firestore().collection(e).add(d(s.toJSObject())).then(()=>{typeof t!="undefined"&&t.setString("ok")}).catch(n=>{typeof t!="undefined"&&t.setString(n.message)})},o.writeDocument=(e,s,t,n)=>{firebase.firestore().collection(e).doc(s).set(d(t.toJSObject())).then(()=>{typeof n!="undefined"&&n.setString("ok")}).catch(i=>{typeof n!="undefined"&&n.setString(i.message)})},o.writeField=(e,s,t,n,i,f=!0)=>{firebase.firestore().collection(e).doc(s).set({[t]:y(n)},{merge:f}).then(()=>{typeof i!="undefined"&&i.setString("ok")}).catch(g=>{typeof i!="undefined"&&i.setString(g.message)})},o.updateDocument=(e,s,t,n)=>{firebase.firestore().collection(e).doc(s).update(d(t.toJSObject())).then(()=>{typeof n!="undefined"&&n.setString("ok")}).catch(i=>{typeof n!="undefined"&&n.setString(i.message)})},o.updateField=(e,s,t,n,i)=>{firebase.firestore().collection(e).doc(s).update({[t]:y(n)}).then(()=>{typeof i!="undefined"&&i.setString("ok")}).catch(f=>{typeof i!="undefined"&&i.setString(f.message)})},o.deleteDocument=(e,s,t)=>{firebase.firestore().collection(e).doc(s).delete().then(()=>{typeof t!="undefined"&&t.setString("ok")}).catch(n=>{typeof t!="undefined"&&t.setString(n.message)})},o.deleteField=(e,s,t,n)=>{firebase.firestore().collection(e).doc(s).update({[t]:firebase.firestore.FieldValue.delete()}).then(()=>{typeof n!="undefined"&&n.setString("ok")}).catch(i=>{typeof n!="undefined"&&n.setString(i.message)})},o.getDocument=(e,s,t,n)=>{firebase.firestore().collection(e).doc(s).get().then(i=>{typeof n!="undefined"&&n.setString("ok"),t&&t.fromJSObject(i.data())}).catch(i=>{typeof n!="undefined"&&n.setString(i.message)})},o.getField=(e,s,t,n,i)=>{firebase.firestore().collection(e).doc(s).get().then(f=>{typeof i!="undefined"&&i.setString("ok"),n&&n.fromJSObject(f.get(t))}).catch(f=>{typeof i!="undefined"&&i.setString(f.message)})},o.hasDocument=(e,s,t,n)=>{firebase.firestore().collection(e).doc(s).get().then(i=>{typeof n!="undefined"&&n.setString("ok"),t&&t.setBoolean(i.exists)}).catch(i=>{typeof n!="undefined"&&n.setString(i.message)})},o.hasField=(e,s,t,n,i)=>{firebase.firestore().collection(e).doc(s).get().then(f=>{if(typeof i!="undefined"&&i.setString("ok"),n){const g=f.get(t,{serverTimestamps:"estimate"});n.setBoolean(f.exists&&g!==void 0&&g!==null)}}).catch(f=>{typeof i!="undefined"&&i.setString(f.message)})},o.listDocuments=(e,s,t)=>{firebase.firestore().collection(e).get().then(n=>{typeof t!="undefined"&&t.setString(n.empty?"empty":"ok"),s&&s.fromJSObject(n.docs.map(i=>i.id))}).catch(n=>{typeof t!="undefined"&&t.setString(n.message)})},o.getServerTimestamp=()=>"[{__FIREBASE_SERVERSIDE_TIMESTAMP}]";const y=e=>e==="[{__FIREBASE_SERVERSIDE_TIMESTAMP}]"?firebase.firestore.FieldValue.serverTimestamp():e,d=e=>{for(const s in e){const t=e[s];typeof t=="object"?d(t):t==="[{__FIREBASE_SERVERSIDE_TIMESTAMP}]"&&(e[s]=firebase.firestore.FieldValue.serverTimestamp())}return e}})(c=u.firestore||(u.firestore={}))})(x=m.firebaseTools||(m.firebaseTools={}))})(j=p.evtTools||(p.evtTools={}))})(gdjs||(gdjs={}));
//# sourceMappingURL=D_cloudfirestoretools.js.map
